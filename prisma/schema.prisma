generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model feedback {
  id      String @id
  message String
  ip      String
}

model leaderboard {
  id                    String                 @id
  device_id             String                 @unique(map: "leaderboard_index")
  device_dob            DateTime               @db.Timestamp(6)
  device_name           String
  total_dabs            Int
  owner_name            String
  last_active           DateTime               @default(now()) @db.Timestamp(6)
  last_ip               String?
  device_model          String?
  leaderboard_positions leaderboard_positions?
}

model users {
  id            String  @id
  platform      String  @default("discord")
  platform_id   String
  name          String
  image         String?
  flags         Int     @default(0)
  refresh_token String
}

model diagnostics {
  id                      String    @id(map: "diag_pkey")
  device_name             String
  device_firmware         String
  device_git_hash         String?
  device_uptime           Int?
  device_utc_time         Int?
  device_battery_capacity Int?
  device_model            String
  device_uid              String?
  device_chamber_type     Int?      @db.SmallInt
  device_dob              DateTime? @db.Timestamp(6)
  device_profiles         Json?
  device_services         Json[]
  lorax                   Boolean   @default(false)
  pup                     Boolean   @default(false)
  authenticated           Boolean   @default(false)
  user_agent              String
  ip                      String
  session_id              String?
}

model leaderboard_positions {
  device_id   String      @id
  position    Int
  leaderboard leaderboard @relation(fields: [device_id], references: [device_id], onDelete: Cascade)
}

model old_diagnostics {
  id              String @id(map: "diagnostics_pkey")
  device_name     String
  device_firmware String
  device_model    String
  user_agent      String
  ip              String
}

model strains {
  id       String  @id
  name     String?
  slug     String?
  platform String?
  species  String?
  thc      String?
  cbd      String?
}
